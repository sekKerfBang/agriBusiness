{% extends 'base.html' %}
{% load static %}

{% block title %}Mes produits - Dashboard{% endblock %}

{% block content %}
  <div class="container">
    <h1 class="section-title">Gestion de mes produits</h1>

    <div class="text-right mb-4">
      <a href="#" class="btn btn-action btn-lg">
        <i class="fas fa-plus mr-2"></i> Ajouter un produit
      </a>
    </div>

    <div class="table-responsive">
      <table class="table table-dashboard text-white">
        <thead>
          <tr>
            <th>Image</th>
            <th>Nom</th>
            <th>Catégorie</th>
            <th>Prix</th>
            <th>Stock</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
          <tr>
            <td>
              {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
              {% else %}
                <div style="width: 60px; height: 60px; background: #555; border-radius: 8px;"></div>
              {% endif %}
            </td>
            <td><strong>{{ product.name }}</strong></td>
            <td>{{ product.category.name }}</td>
            <td>{{ product.price }} €</td>
            <td>
              <span class="{% if product.stock < 10 %}text-danger{% elif product.stock < 30 %}text-warning{% endif %}">
                {{ product.stock }}
              </span>
            </td>
            <td>
              <span class="badge badge-pill {% if product.is_active %}badge-success{% else %}badge-secondary{% endif %}">
                {% if product.is_active %}Actif{% else %}Inactif{% endif %}
              </span>
            </td>
            <td>
              <a href="#" class="btn btn-sm btn-action mr-2">Éditer</a>
              <a href="#" class="btn btn-sm btn-outline-light">Supprimer</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center py-5">Aucun produit publié pour le moment</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}